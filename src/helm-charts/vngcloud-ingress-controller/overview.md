<div style="float: right;"><img src="../../../images/01.png" width="160px" /></div><br>

# Overview

[**Ingress**](https://kubernetes.io/docs/concepts/services-networking/ingress/) An API object that manages external access to the services in a cluster, typically HTTP. Ingress may provide load balancing, SSL termination and name-based virtual hosting.

[**Ingress Controllers**](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/) In order for the Ingress resource to work, the cluster must have an ingress controller running. Unlike other types of controllers which run as part of the kube-controller-manager binary, Ingress controllers are not started automatically with a cluster. Use this page to choose the ingress controller implementation that best fits your cluster.

## The plugin's annotations

Compare with [AWS Ingress Annoration](https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.7/guide/ingress/annotations/).
| AWS                                                                         | VNGCLOUD                                                                                                                                              | Type                       | Default                               | Location        | MergeBehavior |
|------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|---------------------------------------|-----------------|---------------|
| [/load-balancer-name](#load-balancer-name)                                   | [load-balancer-name](#)                                                                                                                               | string                     | N/A                                   | Ingress         | Exclusive     |
| [/group.name](#group.name)                                                   | :x: IngressGroup resource                                                                                                                             | string                     | N/A                                   | Ingress         | N/A           |
| [/group.order](#group.order)                                                 | :x: order across all Ingresses within IngressGroup. The smaller the order, the rule will be evaluated first                                           | integer                    | 0                                     | Ingress         | N/A           |
| [/tags](#tags)                                                               | :x: specifies additional tags that will be applied to AWS resources created                                                                           | stringMap                  | N/A                                   | Ingress,Service | Merge         |
| [/ip-address-type](#ip-address-type)                                         | :x: ipv4 / dualstack                                                                                                                                  | ipv4 / dualstack           | ipv4                                  | Ingress         | Exclusive     |
| [/scheme](#scheme)                                                           | [internal-load-balancer](#)                                                                                                                           | internal / internet-facing | internal                              | Ingress         | Exclusive     |
| [/subnets](#subnets)                                                         | :x: only subnet of worker node                                                                                                                        | stringList                 | N/A                                   | Ingress         | Exclusive     |
| [/security-groups](#security-groups)                                         | :x: securityGroups you want to attach to LoadBalancer                                                                                                 | stringList                 | N/A                                   | Ingress         | Exclusive     |
| [/manage-backend-security-group-rules](#manage-backend-security-group-rules) | :x: auto configure security group rules on Node/Pod                                                                                                   | boolean                    | N/A                                   | Ingress         | Exclusive     |
| [/customer-owned-ipv4-pool](#customer-owned-ipv4-pool)                       | :x: specifies the customer-owned IPv4 address                                                                                                         | string                     | N/A                                   | Ingress         | Exclusive     |
| [/load-balancer-attributes](#load-balancer-attributes)                       | :x: access_logs.s3.enabled=true,...                                                                                                                   | stringMap                  | N/A                                   | Ingress         | Exclusive     |
| [/wafv2-acl-arn](#wafv2-acl-arn)                                             | :x: specifies ARN for the Amazon WAFv2 web ACL                                                                                                        | string                     | N/A                                   | Ingress         | Exclusive     |
| [/waf-acl-id](#waf-acl-id)                                                   | :x: specifies the identifier for the Amazon WAF web ACL                                                                                               | string                     | N/A                                   | Ingress         | Exclusive     |
| [/shield-advanced-protection](#shield-advanced-protection)                   | :x: turns on / off the AWS Shield Advanced protection                                                                                                 | boolean                    | N/A                                   | Ingress         | Exclusive     |
| [/listen-ports](#listen-ports)                                               | :x: set default                                                                                                                                       | json                       | '[{"HTTP": 80}]' / '[{"HTTPS": 443}]' | Ingress         | Merge         |
| [/ssl-redirect](#ssl-redirect)                                               | :x: every HTTP listener will be configured with a default action which redirects to HTTPS                                                             | integer                    | N/A                                   | Ingress         | Exclusive     |
| [/inbound-cidrs](#inbound-cidrs)                                             | [listener-allowed-cidrs](#)                                                                                                                           | stringList                 | 0.0.0.0/0, ::/0                       | Ingress         | Exclusive     |
| [/certificate-arn](#certificate-arn)                                         | :x: The first certificate in the list will be added as default certificate. And remaining certificate will be added to the optional certificate list  | stringList                 | N/A                                   | Ingress         | Merge         |
| [/ssl-policy](#ssl-policy)                                                   | :x: specifies the Security Policy that should be assigned to the ALB                                                                                  | string                     | ELBSecurityPolicy-2016-08             | Ingress         | Exclusive     |
| [/target-type](#target-type)                                                 | :x: specifies how to route traffic to pods (instance mode will route traffic to all ec2 instances, ip mode will route traffic directly to the pod IP) | instance / ip              | instance                              | Ingress,Service | N/A           |
| [/backend-protocol](#backend-protocol)                                       | :x: Only support HTTP                                                                                                                                 | HTTP / HTTPS               | HTTP                                  | Ingress,Service | N/A           |
| [/backend-protocol-version](#backend-protocol-version)                       | :x: No options                                                                                                                                        | string                     | HTTP1                                 | Ingress,Service | N/A           |
| [/target-group-attributes](#target-group-attributes)                         | :x: specifies Target Group Attributes which should be applied to Target Groups                                                                        | stringMap                  | N/A                                   | Ingress,Service | N/A           |
| [/healthcheck-port](#healthcheck-port)                                       | Not support yet                                                                                                                                       | integer / traffic-port     | traffic-port                          | Ingress,Service | N/A           |
| [/healthcheck-protocol](#healthcheck-protocol)                               | [monitor-protocol](#) (TCP/HTTP)                                                                                                                      | HTTP / HTTPS               | HTTP                                  | Ingress,Service | N/A           |
| [/healthcheck-path](#healthcheck-path)                                       | [monitor-http-path](#)                                                                                                                                | string                     | / / /AWS.ALB/healthcheck              | Ingress,Service | N/A           |
| [/healthcheck-interval-seconds](#healthcheck-interval-seconds)               | [monitor-interval](#)                                                                                                                                 | integer                    | '15'                                  | Ingress,Service | N/A           |
| [/healthcheck-timeout-seconds](#healthcheck-timeout-seconds)                 | [monitor-timeout](#)                                                                                                                                  | integer                    | '5'                                   | Ingress,Service | N/A           |
| [/healthy-threshold-count](#healthy-threshold-count)                         | [monitor-healthy-threshold](#)                                                                                                                        | integer                    | '2'                                   | Ingress,Service | N/A           |
| [/unhealthy-threshold-count](#unhealthy-threshold-count)                     | [monitor-unhealthy-threshold](#)                                                                                                                      | integer                    | '2'                                   | Ingress,Service | N/A           |
| [/success-codes](#success-codes)                                             | [monitor-http-success-code](#)                                                                                                                        | string                     | '200' / '12'                          | Ingress,Service | N/A           |
| [/auth-type](#auth-type)                                                     | :x: specifies the authentication type on targets                                                                                                      | none/oidc/cognito          | none                                  | Ingress,Service | N/A           |
| [/auth-idp-cognito](#auth-idp-cognito)                                       | :x: specifies the cognito idp configuration                                                                                                           | json                       | N/A                                   | Ingress,Service | N/A           |
| [/auth-idp-oidc](#auth-idp-oidc)                                             | :x: specifies the oidc idp configuration                                                                                                              | json                       | N/A                                   | Ingress,Service | N/A           |
| [/auth-on-unauthenticated-request](#auth-on-unauthenticated-request)         | :x: specifies the behavior if the user is not authenticated                                                                                           | authenticate/allow/deny    | authenticate                          | Ingress,Service | N/A           |
| [/auth-scope](#auth-scope)                                                   | :x:                                                                                                                                                   | string                     | openid                                | Ingress,Service | N/A           |
| [/auth-session-cookie](#auth-session-cookie)                                 | :x:                                                                                                                                                   | string                     | AWSELBAuthSessionCookie               | Ingress,Service | N/A           |
| [/auth-session-timeout](#auth-session-timeout)                               | :x:                                                                                                                                                   | integer                    | '604800'                              | Ingress,Service | N/A           |
| [/actions.${action-name}](#actions)                                          | :x:                                                                                                                                                   | json                       | N/A                                   | Ingress         | N/A           |
| [/conditions.${conditions-name}](#conditions)                                | :x:                                                                                                                                                   | json                       | N/A                                   | Ingress         | N/A           |
| [/target-node-labels](#target-node-labels)                                   | :x: specifies which nodes to include in the target group registration for instance target type                                                        | stringMap                  | N/A                                   | Ingress,Service | N/A           |
| [/mutual-authentication](#mutual-authentication)                             | :x: mutual authentication configuration                                                                                                               | json                       | '[{"port": 443, "mode": "off"}]'      | Ingress         | Exclusive     |
|                                                                              | [load-balancer-id](#)                                                                                                                                 |                            |                                       |                 |               |
|                                                                              | [package-id](#)                                                                                                                                       |                            |                                       |                 |               |
|                                                                              | [enable-secgroup-default](#)                                                                                                                          |                            |                                       |                 |               |
|                                                                              | [idle-timeout-client](#)                                                                                                                              |                            |                                       |                 |               |
|                                                                              | [idle-timeout-member](#)                                                                                                                              |                            |                                       |                 |               |
|                                                                              | [idle-timeout-connection](#)                                                                                                                          |                            |                                       |                 |               |
|                                                                              | [pool-algorithm](#)                                                                                                                                   |                            |                                       |                 |               |
|                                                                              | [monitor-http-method](#)                                                                                                                              |                            |                                       |                 |               |
|                                                                              | [monitor-http-version](#)                                                                                                                             |                            |                                       |                 |               |
|                                                                              | [monitor-http-domain-name](#)                                                                                                                         |                            |                                       |                 |               |
|                                                                              | [enable-sticky-session](#)                                                                                                                            |                            |                                       |                 |               |
|                                                                              | [enable-tls-encryption](#)                                                                                                                            |                            |                                       |                 |               |

| #  | Annotation                                    | Description                                                                                                                                                                                                                                                                                                                                                                                                                                   | Default/Example                                                          |
|----|-----------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|
| 1  | `vks.vngcloud.vn/load-balancer-id`            | The ID of the load balancer to be used for the service. If this annotation is not specified, a new load balancer will be created for the service.                                                                                                                                                                                                                                                                                             | - Default is empty.<br>- E.g: `lb-67cd0bbc-4c27-xxxx-xxxx-9f416a509577`. |
| 2  | `vks.vngcloud.vn/internal-load-balancer`      | Specify whether the load balancer is internal or external. This field **SHOULD** be **ignored** if the `vks.vngcloud.vn/load-balancer-id` field is provided.                                                                                                                                                                                                                                                                                  | - Default: `false`.                                                      |
| 3  | `vks.vngcloud.vn/load-balancer-name`          | Specify the load balancer's name for the service. If this annotation is omitted, the load balancer's name will be auto-generated in the format: `vks-<piece-of-cluster-uuid>-<service-namespace>-<service-name>`. If a specific load balancer name is provided, it will be formatted as: `vks-<piece-of-cluster-uuid>-<your-loadbalancer-name>`. This field is **disregarded** when the `vks.vngcloud.vn/load-balancer-id` field is provided. | - Default is empty.<br>- E.g: `my-new-loadbalancer`.                     |
| 4  | `vks.vngcloud.vn/package-id`                  | The ID of the network load-balancer package to be used for the service. If this annotation is not specified, the default package will be used. This field is **ignored** when the `vks.vngcloud.vn/load-balancer-id` field is provided.                                                                                                                                                                                                       | - Default: `lbp-96b6b072-aadb-4b58-9d5f-c16ad69d36aa` _(`NLB_Small`)_.   |
| 5  | `vks.vngcloud.vn/enable-secgroup-default`     | Specify whether to attach the `Default` security group to the members of this load balancer.                                                                                                                                                                                                                                                                                                                                                  | - Default: `true`.                                                       |
| 6  | `vks.vngcloud.vn/idle-timeout-client`         | Connection idle timeout is the maximum time a connection can remain open without any data transfer, after which the load balancer will close the connection. Range:  \\( 1 \Rightarrow 3600 \\).                                                                                                                                                                                                                                              | - Default: `50`.                                                         |
| 7  | `vks.vngcloud.vn/idle-timeout-member`         | Backend member inactivity timeout in seconds. Range:  \\( 1 \Rightarrow 3600 \\).                                                                                                                                                                                                                                                                                                                                                             | - Default: `50`.                                                         |
| 8  | `vks.vngcloud.vn/idle-timeout-connection`     | Backend member connection timeout in seconds.                                                                                                                                                                                                                                                                                                                                                                                                 | - Default: `5`.                                                          |
| 9  | `vks.vngcloud.vn/listener-allowed-cidrs`      | Access control list (ACL) to limit incoming traffic to a listener to a set of allowed source IP addresses (CIDRs).                                                                                                                                                                                                                                                                                                                            | - Default: `0.0.0.0/0`.<br>- E.g: `172.16.0.0/24`                       |
| 10 | `vks.vngcloud.vn/pool-algorithm`              | The load balancing algorithm used to determine which backend server to send a request to. Possible values: `round-robin`, `least-connections`, and `source-ip`.                                                                                                                                                                                                                                                                               | - Default: `round-robin`.                                                |
| 11 | `vks.vngcloud.vn/monitor-healthy-threshold`   | The number of successful health checks a pool member must pass before it is considered as a healthy pool.                                                                                                                                                                                                                                                                                                                                     | - Default: `3`.                                                          |
| 12 | `vks.vngcloud.vn/monitor-unhealthy-threshold` | The number of consecutive failed health checks before it is considered as unhealthy pool.                                                                                                                                                                                                                                                                                                                                                     | - Default: `3`.                                                          |
| 13 | `vks.vngcloud.vn/monitor-timeout`             | The maximum time will wait for a response from a pool member before considering it a failed health check.                                                                                                                                                                                                                                                                                                                                     | - Default: `5`.                                                          |
| 14 | `vks.vngcloud.vn/monitor-interval`            | The period of time between successive health checks performed by an individual pool in seconds.                                                                                                                                                                                                                                                                                                                                               | - Default: `30`.                                                         |
| 15 | `vks.vngcloud.vn/monitor-protocol`            | The type of health monitor. Possible values: `tcp`, `ping-udp`, `http`, and `https`.                                                                                                                                                                                                                                                                                                                                                          | - Default: `tcp`.                                                        |
| 16 | `vks.vngcloud.vn/monitor-http-method`         | Define the HTTP method used for sending health check requests to the backend servers. This option is applicable only when the `vks.vngcloud.vn/monitor-protocol` is set to `http` or `https`. Acceptable values include `get`, `post`, and `put`.                                                                                                                                                                                             | - Default: `get`.                                                        |
| 17 | `vks.vngcloud.vn/monitor-http-path`           | Use the default path of `/` to ping the root, or specify a custom path if preferred. This option is applicable only when the `vks.vngcloud.vn/monitor-protocol` is set to `http` or `https`.                                                                                                                                                                                                                                                  | - Default: `/`.                                                          |
| 18 | `vks.vngcloud.vn/monitor-http-success-code`   | Define the HTTP status code that indicates a successful health check. This option is applicable only when the `vks.vngcloud.vn/monitor-protocol` is set to `http` or `https`.                                                                                                                                                                                                                                                                 | - Default: `200`.                                                        |
| 19 | `vks.vngcloud.vn/monitor-http-version`        | Define the HTTP version used for sending health check requests to the backend servers. This option is applicable only when the `vks.vngcloud.vn/monitor-protocol` is set to `http` or `https`. Acceptable values include `1.0`, and `1.1`.                                                                                                                                                                                                    | - Default: `1.0`.                                                        |
| 20 | `vks.vngcloud.vn/monitor-http-domain-name`    | The domain name, which be injected into the HTTP Host Header to the backend server for HTTP health check. This option is applicable only when the `vks.vngcloud.vn/monitor-protocol` is set to `http` or `https` and the `vks.vngcloud.vn/monitor-http-version` field is `1.1`.                                                                                                                                                               | - Default: `nip.io`.                                                     |

The aforementioned fields **CAN** be configured using the default `values.yaml` file in **Helm**, eliminating the need for manual configuration in each Kubernetes service manifest's annotations.
